<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fightify - –†–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç</title>
<style>
  /* === –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ === */
  body, html {
    margin: 0; padding: 0; height: 100%;
    background: #5e4d53;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #a61241;
    user-select: none;
    -webkit-user-select:none;
    overflow: hidden;
  }
  #container {
    display: flex; flex-direction: column; height: 100vh; padding: 10px;
  }
  h1 {
    margin: 0 0 10px 0; font-weight: 700; text-align: center;
  }

  /* === –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è === */
  #topbar {
    display: flex; gap: 12px; align-items: center; justify-content: center;
    margin-bottom: 8px;
  }
  button, select, input[type="file"] {
    background: #a61241;
    border: none;
    color: #f0f0f0;
    font-weight: 700;
    padding: 8px 14px;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.3s ease;
    font-size: 14px;
  }
  button:hover, select:hover, input[type="file"]:hover {
    background: #8f1037;
  }
  select {
    user-select: auto;
  }

  /* === –†–µ–¥–∞–∫—Ç–æ—Ä –Ω–æ—Ç === */
  #editorArea {
    background: #3d3039;
    flex-grow: 1;
    border-radius: 6px;
    position: relative;
    overflow: hidden;
    cursor: crosshair;
    box-shadow: inset 0 0 15px #a6124144;
  }

  /* === –ó–æ–Ω–∞ –Ω–∞–∂–∞—Ç–∏—è —Å–ø—Ä–∞–≤–∞ === */
  #hitZone {
    position: absolute;
    top: 0; right: 100px;
    width: 60px; height: 100%;
    border-left: 2px solid #a61241cc;
    pointer-events: none;
  }

  /* === –ù–æ—Ç—ã === */
  .note {
    position: absolute;
    width: 40px; height: 40px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 18px;
    color: white;
    user-select: none;
    text-shadow: 0 0 4px #000000cc;
    box-shadow: 0 0 10px #a61241bb;
    transition: opacity 0.5s ease;
  }
  .note.A { background: #e94a4a; }
  .note.S { background: #e9a54a; }
  .note.D { background: #4ae994; }
  .note.F { background: #4a81e9; }
  .note.MOUSE { background: #b44ae9; font-size: 22px; }

  /* === –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å –∞—É–¥–∏–æ === */
  #audiobar {
    margin-top: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: center;
  }
  #audioSlider {
    width: 60%;
    cursor: pointer;
    -webkit-appearance: none;
    height: 6px;
    border-radius: 3px;
    background: #a61241aa;
  }
  #audioSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px; height: 16px;
    border-radius: 50%;
    background: #a61241;
    cursor: pointer;
    border: none;
    margin-top: -5px;
  }
  #audioSlider::-moz-range-thumb {
    width: 16px; height: 16px;
    border-radius: 50%;
    background: #a61241;
    cursor: pointer;
    border: none;
  }

  /* –ü–æ–¥—Å–∫–∞–∑–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–ª–∞–≤–∏—à–∏ */
  #selectedKey {
    font-weight: 900;
    font-size: 18px;
    padding: 0 6px;
    color: white;
    text-shadow: 0 0 8px #a61241cc;
  }
</style>
</head>
<body>
<div id="container">
  <h1>Fightify ‚Äî –†–µ–¥–∞–∫—Ç–æ—Ä –∫–∞—Ä—Ç</h1>
  <div id="topbar">
    <input id="fileLoader" type="file" accept="audio/*" />
    <button id="playPauseBtn" disabled>Play ‚ñ∂Ô∏è</button>
    <button id="modeBtn" disabled>–†–µ–∂–∏–º: –†–µ–¥–∞–∫—Ç–æ—Ä</button>
    <select id="keySelector" title="–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞–≤–∏—à—É –¥–ª—è –Ω–æ–≤–æ–π –Ω–æ—Ç—ã">
      <option value="A">A</option>
      <option value="S">S</option>
      <option value="D">D</option>
      <option value="F">F</option>
      <option value="MOUSE">–ü–ö–ú</option>
    </select>
    <span id="selectedKey">A</span>
  </div>
  <div id="editorArea">
    <div id="hitZone"></div>
  </div>
  <div id="audiobar">
    <input type="range" id="audioSlider" min="0" max="100" value="0" step="0.1" />
    <span id="timeDisplay">00:00 / 00:00</span>
  </div>
</div>

<audio id="audioTrack" preload="auto"></audio>

<script>
(() => {
  // Constants
  const noteWidth = 40;
  const noteHeight = 40;
  const hitZoneX = 700; // –ø–æ–∑–∏—Ü–∏—è –∑–æ–Ω—ã –Ω–∞–∂–∞—Ç–∏—è –ø–æ X (px) –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
  const editorWidth = 800; // —à–∏—Ä–∏–Ω–∞ editorArea (px)
  const editorHeight = 400; // –≤—ã—Å–æ—Ç–∞ editorArea (px)
  const noteSpeed = 150; // –ø–∏–∫—Å–µ–ª–µ–π –≤ —Å–µ–∫—É–Ω–¥—É, —Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –Ω–æ—Ç —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ (—á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ)

  // DOM Elements
  const fileLoader = document.getElementById('fileLoader');
  const audioTrack = document.getElementById('audioTrack');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const modeBtn = document.getElementById('modeBtn');
  const keySelector = document.getElementById('keySelector');
  const selectedKeySpan = document.getElementById('selectedKey');
  const editorArea = document.getElementById('editorArea');
  const hitZone = document.getElementById('hitZone');
  const audioSlider = document.getElementById('audioSlider');
  const timeDisplay = document.getElementById('timeDisplay');

  // –†–∞–∑–º–µ—Ä—ã –∏ —Å—Ç–∏–ª–∏ editorArea
  editorArea.style.width = editorWidth + 'px';
  editorArea.style.height = editorHeight + 'px';

  // –°–æ—Å—Ç–æ—è–Ω–∏—è
  let notes = []; // {id, key, time, y, element, hit}
  let mode = 'editor'; // editor / test
  let animationFrameId = null;
  let lastTimestamp = null;
  let isPlaying = false;

  // –î–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏ id –Ω–æ—Ç
  let nextNoteId = 1;

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–ª–∞–≤–∏—à–∏
  keySelector.addEventListener('change', () => {
    selectedKeySpan.textContent = keySelector.value === 'MOUSE' ? '–ü–ö–ú' : keySelector.value;
  });

  // –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ
  fileLoader.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (!file) return;
    const url = URL.createObjectURL(file);
    audioTrack.src = url;
    audioTrack.load();
    audioTrack.currentTime = 0;
    playPauseBtn.disabled = false;
    modeBtn.disabled = false;
    resetEditor();
  });

  // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ / –ø–∞—É–∑–∞
  playPauseBtn.addEventListener('click', () => {
    if (!audioTrack.src) return;
    if (isPlaying) {
      audioTrack.pause();
    } else {
      audioTrack.play();
    }
  });

  audioTrack.addEventListener('play', () => {
    isPlaying = true;
    playPauseBtn.textContent = 'Pause ‚è∏Ô∏è';
    if (mode === 'test') {
      startAnimation();
    }
  });
  audioTrack.addEventListener('pause', () => {
    isPlaying = false;
    playPauseBtn.textContent = 'Play ‚ñ∂Ô∏è';
    stopAnimation();
  });
  audioTrack.addEventListener('ended', () => {
    isPlaying = false;
    playPauseBtn.textContent = 'Play ‚ñ∂Ô∏è';
    stopAnimation();
  });

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–∞–π–¥–µ—Ä–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏
  audioTrack.addEventListener('timeupdate', () => {
    if (!audioTrack.duration) return;
    const val = (audioTrack.currentTime / audioTrack.duration) * 100;
    audioSlider.value = val;
    updateTimeDisplay();
  });

  audioSlider.addEventListener('input', () => {
    if (!audioTrack.duration) return;
    const time = (audioSlider.value / 100) * audioTrack.duration;
    audioTrack.currentTime = time;
    if (mode === 'test') renderNotes();
  });

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  function updateTimeDisplay() {
    const ct = audioTrack.currentTime;
    const dur = audioTrack.duration || 0;
    timeDisplay.textContent = formatTime(ct) + ' / ' + formatTime(dur);
  }
  function formatTime(t) {
    if (!t) return '00:00';
    const m = Math.floor(t / 60);
    const s = Math.floor(t % 60);
    return (m < 10 ? '0'+m : m) + ':' + (s < 10 ? '0'+s : s);
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤
  modeBtn.addEventListener('click', () => {
    if (mode === 'editor') {
      if (!audioTrack.src) {
        alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ —Ç—Ä–µ–∫ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º –∫–∞—Ä—Ç—ã.');
        return;
      }
      mode = 'test';
      modeBtn.textContent = '–†–µ–∂–∏–º: –¢–µ—Å—Ç';
      editorArea.style.cursor = 'default';
      clearNotesElements();
      renderNotes();
      if (isPlaying) startAnimation();
    } else {
      mode = 'editor';
      modeBtn.textContent = '–†–µ–∂–∏–º: –†–µ–¥–∞–∫—Ç–æ—Ä';
      editorArea.style.cursor = 'crosshair';
      stopAnimation();
      clearNotesElements();
      renderNotes();
    }
  });

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ—Ç—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ (—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞)
  editorArea.addEventListener('contextmenu', e => e.preventDefault());

  editorArea.addEventListener('mousedown', e => {
    if (mode !== 'editor') return;
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–∂–∞—Ç—É—é –∫–ª–∞–≤–∏—à—É: –º—ã—à—å –ü–ö–ú –∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –Ω–∞ —Å–µ–ª–µ–∫—Ç–µ
    let key = keySelector.value;
    if (e.button === 2) key = 'MOUSE';
    else if (e.button !== 0) return; // –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ—Ç—ã —Ç–æ–ª—å–∫–æ –õ–ö–ú –∏–ª–∏ –ü–ö–ú

    const rect = editorArea.getBoundingClientRect();
    const x = e.clientX - rect.left;
    if (x > editorWidth - 100) return; // –∑–∞–ø—Ä–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∑–æ–Ω–µ –Ω–∞–∂–∞—Ç–∏—è —Å–ø—Ä–∞–≤–∞

    const y = e.clientY - rect.top;
    const time = audioTrack.currentTime + (hitZoneX - x) / noteSpeed;

    if (time < 0) return; // –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ—Ç—ã –≤ –ø—Ä–æ—à–ª–æ–µ

    addNote(key, time, y);
  });

  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ—Ç—É –≤ –º–∞—Å—Å–∏–≤ –∏ –Ω–∞ —ç–∫—Ä–∞–Ω
  function addNote(key, time, y) {
    const id = nextNoteId++;
    const note = {
      id,
      key,
      time,
      y: Math.min(Math.max(y, noteHeight/2), editorHeight - noteHeight/2),
      hit: false,
      element: null,
      opacity: 1,
    };
    notes.push(note);
    if (mode === 'editor') {
      createNoteElement(note);
      sortNotesByTime();
    }
  }

  // –°–æ–∑–¥–∞—ë–º DOM —ç–ª–µ–º–µ–Ω—Ç –Ω–æ—Ç—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
  function createNoteElement(note) {
    const el = document.createElement('div');
    el.classList.add('note', note.key);
    el.style.top = (note.y - noteHeight/2) + 'px';
    el.style.left = ((note.time - audioTrack.currentTime) * noteSpeed) + 'px';
    el.textContent = note.key === 'MOUSE' ? 'üñ±Ô∏è' : note.key;
    editorArea.appendChild(el);
    note.element = el;
  }

  // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏ –Ω–æ—Ç –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
  function updateEditorNotes() {
    const now = audioTrack.currentTime;
    notes.forEach(note => {
      if (!note.element) return;
      const x = (note.time - now) * noteSpeed;
      if (x < -noteWidth) {
        note.element.style.display = 'none';
      } else {
        note.element.style.display = 'flex';
        note.element.style.left = x + 'px';
      }
    });
  }

  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–æ—Ç—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ)
  function sortNotesByTime() {
    notes.sort((a,b) => a.time - b.time);
  }

  // –£–¥–∞–ª—è–µ–º –≤—Å–µ DOM —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–æ—Ç
  function clearNotesElements() {
    notes.forEach(note => {
      if (note.element) {
        note.element.remove();
        note.element = null;
      }
    });
  }

  // === –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º ===
  // –°–æ–∑–¥–∞—ë–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –Ω–æ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–≤–∏–≥–∞—é—Ç—Å—è —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ –∫ hitZone
  // –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∏ –Ω–∞–∂–∞—Ç–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–ª–∞–≤–∏—à–∏ –Ω–æ—Ç–∞ –ø–ª–∞–≤–Ω–æ –∏—Å—á–µ–∑–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç—Å—è

  function renderNotes() {
    clearNotesElements();
    notes.forEach(note => {
      note.opacity = 1;
      note.hit = false;
      createNoteElement(note);
    });
    updateTestNotesPositions();
  }

  function updateTestNotesPositions() {
    const now = audioTrack.currentTime;
    notes.forEach(note => {
      if (!note.element) return;
      const timeDiff = note.time - now;
      const x = timeDiff * noteSpeed;
      if (x < -noteWidth) {
        note.element.style.display = 'none';
      } else {
        note.element.style.display = 'flex';
        note.element.style.left = x + 'px';
      }
    });
  }

  // –ê–Ω–∏–º–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
  function animationStep(ts) {
    if (!lastTimestamp) lastTimestamp = ts;
    const dt = (ts - lastTimestamp) / 1000;
    lastTimestamp = ts;

    const now = audioTrack.currentTime;

    notes.forEach(note => {
      if (!note.element) return;
      if (note.hit) {
        note.opacity -= dt * 2; // –ø–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ (0.5 —Å–µ–∫)
        if (note.opacity <= 0) {
          note.element.remove();
          note.element = null;
          note.hit = 'removed';
        } else {
          note.element.style.opacity = note.opacity;
        }
      } else {
        const timeDiff = note.time - now;
        const x = timeDiff * noteSpeed;
        if (x < -noteWidth) {
          // –£–¥–∞–ª—è–µ–º –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—É—é –Ω–æ—Ç—É, –µ—Å–ª–∏ –Ω–µ –Ω–∞–∂–∞–ª–∏
          note.element.remove();
          note.element = null;
          note.hit = 'missed';
        } else {
          note.element.style.left = x + 'px';
          note.element.style.opacity = 1;
        }
      }
    });

    // –§–∏–ª—å—Ç—Ä—É–µ–º —É–¥–∞–ª—ë–Ω–Ω—ã–µ –∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –Ω–æ—Ç—ã –∏–∑ –º–∞—Å—Å–∏–≤–∞
    notes = notes.filter(n => n.hit !== 'removed' && n.hit !== 'missed');

    animationFrameId = requestAnimationFrame(animationStep);
  }
  function startAnimation() {
    if (!animationFrameId) {
      lastTimestamp = null;
      animationFrameId = requestAnimationFrame(animationStep);
    }
  }
  function stopAnimation() {
    if (animationFrameId) {
      cancelAnimationFrame(animationFrameId);
      animationFrameId = null;
      lastTimestamp = null;
    }
  }

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–ª–∞–≤–∏—à –¥–ª—è —Ç–µ—Å—Ç–∞
  window.addEventListener('keydown', e => {
    if (mode !== 'test' || !isPlaying) return;
    const keyPressed = e.key.toUpperCase();
    if (!['A','S','D','F'].includes(keyPressed)) return;
    hitNoteByKey(keyPressed);
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≤–µ–¥–µ–Ω–∏—è –∏ –∫–ª–∏–∫–∞ –º—ã—à–∏ –ø–æ –Ω–æ—Ç–∞–º –ü–ö–ú (MOUSE)
  editorArea.addEventListener('mousemove', e => {
    if (mode !== 'test' || !isPlaying) return;
    const rect = editorArea.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;
    notes.forEach(note => {
      if (note.key !== 'MOUSE' || note.hit) return;
      if (!note.element) return;
      const noteX = parseFloat(note.element.style.left);
      const noteY = note.y - noteHeight/2;
      if (mouseX >= noteX && mouseX <= noteX + noteWidth && mouseY >= noteY && mouseY <= noteY + noteHeight) {
        note.element.style.filter = 'brightness(1.5)';
      } else {
        note.element.style.filter = '';
      }
    });
  });
  editorArea.addEventListener('mousedown', e => {
    if (mode !== 'test' || !isPlaying) return;
    if (e.button !== 2) return; // —Ç–æ–ª—å–∫–æ –ü–ö–ú –¥–ª—è –Ω–æ—Ç MOUSE
    e.preventDefault();
    const rect = editorArea.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;
    notes.forEach(note => {
      if (note.key !== 'MOUSE' || note.hit) return;
      if (!note.element) return;
      const noteX = parseFloat(note.element.style.left);
      const noteY = note.y - noteHeight/2;
      if (mouseX >= noteX && mouseX <= noteX + noteWidth && mouseY >= noteY && mouseY <= noteY + noteHeight) {
        hitNote(note);
      }
    });
  });

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ –Ω–æ—Ç–µ –ø–æ –∫–ª–∞–≤–∏—à–µ
  function hitNoteByKey(key) {
    // –∏—â–µ–º –±–ª–∏–∂–∞–π—à—É—é –Ω–æ—Ç—É –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –Ω–∞–∂–∞—Ç–∞ –∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å key, –∏ –∫–æ—Ç–æ—Ä–∞—è –≤ –∑–æ–Ω–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è
    // –∑–æ–Ω–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è - –Ω–æ—Ç—ã —Å x –≤ —Ä–∞–π–æ–Ω–µ hitZoneX ¬± 40px
    const now = audioTrack.currentTime;
    const zoneLeft =  hitZoneX - 40;
    const zoneRight = hitZoneX + 40;

    let candidate = null;
    let candidateDist = Infinity;
    notes.forEach(note => {
      if (note.hit || note.key !== key) return;
      if (!note.element) return;
      const x = parseFloat(note.element.style.left);
      if (x >= zoneLeft && x <= zoneRight) {
        const dist = Math.abs(x - hitZoneX);
        if (dist < candidateDist) {
          candidateDist = dist;
          candidate = note;
        }
      }
    });
    if (candidate) hitNote(candidate);
  }

  // –ü–æ–º–µ—á–∞–µ–º –Ω–æ—Ç—É –∫–∞–∫ –Ω–∞–∂–∞—Ç—É—é –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
  function hitNote(note) {
    note.hit = true;
    note.element.style.filter = 'brightness(2)';
  }

  // –°–±—Ä–æ—Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
  function resetEditor() {
    notes = [];
    clearNotesElements();
    audioSlider.value = 0;
    timeDisplay.textContent = '00:00 / 00:00';
    mode = 'editor';
    modeBtn.textContent = '–†–µ–∂–∏–º: –†–µ–¥–∞–∫—Ç–æ—Ä';
    editorArea.style.cursor = 'crosshair';
  }

})();
</script>
</body>
</html>

